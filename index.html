<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPR Medications Learning System v4 - Enhanced Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .card-flip {
            perspective: 1000px;
            height: 280px;
            margin-bottom: 20px;
        }
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card-flip.flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-sizing: border-box;
            overflow: hidden;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        .quiz-option {
            transition: all 0.3s ease;
        }
        .quiz-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .quiz-option.correct {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        .quiz-option.incorrect {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        .quiz-option.disabled {
            pointer-events: none;
            opacity: 0.7;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .nav-tab {
            transition: all 0.3s ease;
        }
        .nav-tab.active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            max-width: 300px;
        }
        .notification.show {
            transform: translateX(0);
        }
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        .notification.info {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .stats-card:hover {
            transform: translateY(-4px);
        }
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 min-h-full">
    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-4">
                üíä CPR Medications Learning System v4
            </h1>
            <p class="text-gray-600 text-lg">‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏¢‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö 25 ‡∏Ç‡πâ‡∏≠</p>
            <div class="mt-4 flex justify-center items-center space-x-6 flex-wrap">
                <div class="flex items-center text-sm text-gray-500">
                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2" id="connection-status"></div>
                    <span id="connection-text">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheets v4</span>
                </div>
                <div class="text-sm text-gray-500" id="user-info">
                    ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: <span id="user-email">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="flex justify-center mb-8 overflow-x-auto">
            <div class="bg-white rounded-xl p-2 shadow-lg flex space-x-1 min-w-max">
                <button onclick="switchMode('flashcards')" class="nav-tab active px-6 py-3 rounded-lg font-medium whitespace-nowrap" id="flashcards-tab">
                    üìö Flash Cards
                </button>
                <button onclick="switchMode('quiz')" class="nav-tab px-6 py-3 rounded-lg font-medium text-gray-600 whitespace-nowrap" id="quiz-tab">
                    üß† ‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö (25 ‡∏Ç‡πâ‡∏≠)
                </button>
                <button onclick="switchMode('results')" class="nav-tab px-6 py-3 rounded-lg font-medium text-gray-600 whitespace-nowrap" id="results-tab">
                    üìä ‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                </button>
                <button onclick="switchMode('leaderboard')" class="nav-tab px-6 py-3 rounded-lg font-medium text-gray-600 whitespace-nowrap" id="leaderboard-tab">
                    üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö
                </button>
                <button onclick="switchMode('analytics')" class="nav-tab px-6 py-3 rounded-lg font-medium text-gray-600 whitespace-nowrap" id="analytics-tab">
                    üìà ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
                </button>
            </div>
        </div>

        <!-- Flash Cards Mode -->
        <div id="flashcards-mode" class="mode-content">
            <!-- Progress Bar -->
            <div class="mb-6 bg-white rounded-xl p-6 shadow-lg">
                <div class="flex justify-between items-center mb-3">
                    <span class="text-lg font-semibold text-gray-700">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</span>
                    <span class="text-lg text-gray-600 font-medium" id="progress-text">0/15</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-4">
                    <div class="progress-bar bg-gradient-to-r from-green-400 via-blue-500 to-purple-500 h-4 rounded-full" id="progress-bar" style="width: 0%"></div>
                </div>
                <div class="mt-3 flex justify-between text-sm text-gray-500">
                    <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</span>
                    <span id="study-time-display">‡πÄ‡∏ß‡∏•‡∏≤‡∏®‡∏∂‡∏Å‡∏©‡∏≤: 0 ‡∏ô‡∏≤‡∏ó‡∏µ</span>
                    <span>‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</span>
                </div>
            </div>

            <!-- Enhanced Controls -->
            <div class="flex flex-wrap gap-4 mb-6 justify-center">
                <button onclick="shuffleCards()" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                    üîÄ ‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î
                </button>
                <button onclick="resetProgress()" class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                    üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                </button>
                <button onclick="showAll()" class="bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                    üëÅÔ∏è ‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </button>
                <button onclick="saveStudyProgress()" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                    üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
                </button>
                <button onclick="startStudyTimer()" class="bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg" id="timer-btn">
                    ‚è±Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
                </button>
            </div>

            <!-- Filter Buttons -->
            <div class="flex flex-wrap gap-3 mb-8 justify-center">
                <button onclick="filterCards('all')" class="filter-btn bg-gradient-to-r from-gray-600 to-gray-700 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                </button>
                <button onclick="filterCards('vasopressor')" class="filter-btn bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üü• Vasopressor
                </button>
                <button onclick="filterCards('antiarrhythmic')" class="filter-btn bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üü¶ Antiarrhythmic
                </button>
                <button onclick="filterCards('anticholinergic')" class="filter-btn bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üü© Anticholinergic
                </button>
                <button onclick="filterCards('svt')" class="filter-btn bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üü® SVT Therapy
                </button>
                <button onclick="filterCards('electrolyte')" class="filter-btn bg-gradient-to-r from-purple-500 to-purple-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üü™ Electrolyte
                </button>
                <button onclick="filterCards('metabolic')" class="filter-btn bg-gradient-to-r from-indigo-500 to-indigo-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üü£ Metabolic
                </button>
                <button onclick="filterCards('inotropic')" class="filter-btn bg-gradient-to-r from-rose-500 to-rose-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üî¥ Inotropic
                </button>
                <button onclick="filterCards('thrombolytic')" class="filter-btn bg-gradient-to-r from-red-600 to-red-700 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    ü©∏ Thrombolytic
                </button>
                <button onclick="filterCards('diuretic')" class="filter-btn bg-gradient-to-r from-cyan-500 to-cyan-600 text-white px-4 py-2 rounded-xl text-sm font-medium transition-all transform hover:scale-105 shadow-md">
                    üíß Diuretic
                </button>
            </div>

            <!-- Flash Cards Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="cards-container">
                <!-- Cards will be generated by JavaScript -->
            </div>

            <!-- Enhanced Study Stats -->
            <div class="mt-8 bg-white rounded-xl p-8 shadow-lg">
                <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 text-center">
                    <div class="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl border border-green-200">
                        <div class="text-2xl font-bold text-green-600" id="studied-count">0</div>
                        <div class="text-xs text-gray-600 mt-1">‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡πâ‡∏ß</div>
                    </div>
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200">
                        <div class="text-2xl font-bold text-blue-600" id="remaining-count">15</div>
                        <div class="text-xs text-gray-600 mt-1">‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
                    </div>
                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl border border-purple-200">
                        <div class="text-2xl font-bold text-purple-600" id="total-flips">0</div>
                        <div class="text-xs text-gray-600 mt-1">‡∏û‡∏•‡∏¥‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    </div>
                    <div class="bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-xl border border-orange-200">
                        <div class="text-2xl font-bold text-orange-600" id="completion-rate">0%</div>
                        <div class="text-xs text-gray-600 mt-1">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</div>
                    </div>
                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 p-4 rounded-xl border border-yellow-200">
                        <div class="text-2xl font-bold text-yellow-600" id="study-streak">0</div>
                        <div class="text-xs text-gray-600 mt-1">‡∏ß‡∏±‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á</div>
                    </div>
                    <div class="bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-xl border border-pink-200">
                        <div class="text-2xl font-bold text-pink-600" id="focus-category">Mixed</div>
                        <div class="text-xs text-gray-600 mt-1">‡∏´‡∏°‡∏ß‡∏î‡πÇ‡∏ü‡∏Å‡∏±‡∏™</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz Mode (Enhanced with 25 Questions) -->
        <div id="quiz-mode" class="mode-content hidden">
            <div class="max-w-4xl mx-auto">
                <!-- Quiz Header -->
                <div class="bg-white rounded-xl p-8 shadow-lg mb-8">
                    <div class="text-center">
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">üß† ‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏¢‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (25 ‡∏Ç‡πâ‡∏≠)</h2>
                        <div class="flex justify-center items-center space-x-8 text-lg flex-wrap gap-4">
                            <div class="text-blue-600 font-semibold">
                                ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà <span id="current-question">1</span> / <span id="total-questions">25</span>
                            </div>
                            <div class="text-green-600 font-semibold">
                                ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="current-score">0</span>
                            </div>
                            <div class="text-purple-600 font-semibold">
                                ‡πÄ‡∏ß‡∏•‡∏≤: <span id="quiz-timer">00:00</span>
                            </div>
                        </div>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3 mt-6">
                        <div class="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-300" id="quiz-progress" style="width: 4%"></div>
                    </div>
                </div>

                <!-- Quiz Question -->
                <div class="bg-white rounded-xl p-8 shadow-lg mb-6 fade-in hidden" id="quiz-container">
                    <div class="text-center mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-4" id="question-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</h3>
                        <div class="text-gray-600" id="question-category"></div>
                        <div class="text-sm text-gray-500 mt-2" id="question-hint"></div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="quiz-options">
                        <!-- Options will be generated by JavaScript -->
                    </div>
                    
                    <div class="text-center mt-8">
                        <button onclick="nextQuestion()" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" id="next-btn" disabled>
                            ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
                        </button>
                    </div>
                </div>

                <!-- Quiz Controls -->
                <div class="text-center">
                    <button onclick="startQuiz()" class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg mr-4" id="start-quiz-btn">
                        üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö 25 ‡∏Ç‡πâ‡∏≠
                    </button>
                    <button onclick="resetQuiz()" class="bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                        üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Mode -->
        <div id="results-mode" class="mode-content hidden">
            <div class="max-w-6xl mx-auto">
                <div class="bg-white rounded-xl p-8 shadow-lg">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üìä ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
                    
                    <!-- Enhanced Summary Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="total-attempts">0</div>
                            <div class="text-sm mt-1">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ö</div>
                        </div>
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="average-score">0%</div>
                            <div class="text-sm mt-1">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
                        </div>
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="best-score">0%</div>
                            <div class="text-sm mt-1">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</div>
                        </div>
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="improvement-rate">0%</div>
                            <div class="text-sm mt-1">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏û‡∏±‡∏í‡∏ô‡∏≤</div>
                        </div>
                    </div>

                    <!-- Performance Chart -->
                    <div class="bg-gray-50 rounded-xl p-6 mb-8">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">üìà ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ</h3>
                        <div class="chart-container">
                            <canvas id="performance-chart"></canvas>
                        </div>
                    </div>

                    <!-- Results Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gray-50">
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡πÄ‡∏Å‡∏£‡∏î</th>
                                </tr>
                            </thead>
                            <tbody id="results-table" class="bg-white divide-y divide-gray-200">
                                <!-- Results will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="text-center mt-8 space-x-4">
                        <button onclick="loadMyResults()" class="bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                            üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                        <button onclick="exportMyResults()" class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                            üìä ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Leaderboard Mode -->
        <div id="leaderboard-mode" class="mode-content hidden">
            <div class="max-w-6xl mx-auto">
                <div class="bg-white rounded-xl p-8 shadow-lg">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</h2>
                    
                    <!-- Top 3 Podium -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8" id="podium">
                        <!-- Top 3 will be populated by JavaScript -->
                    </div>
                    
                    <!-- Leaderboard Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full table-auto">
                            <thead>
                                <tr class="bg-gradient-to-r from-yellow-50 to-orange-50">
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏ö</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-table" class="bg-white divide-y divide-gray-200">
                                <!-- Leaderboard will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="text-center mt-8">
                        <button onclick="loadLeaderboard()" class="bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                            üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics Mode -->
        <div id="analytics-mode" class="mode-content hidden">
            <div class="max-w-7xl mx-auto">
                <div class="bg-white rounded-xl p-8 shadow-lg">
                    <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">üìà ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
                    
                    <!-- Analytics Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="analytics-users">0</div>
                            <div class="text-sm mt-1">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                        </div>
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="analytics-quizzes">0</div>
                            <div class="text-sm mt-1">‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                        </div>
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="analytics-average">0%</div>
                            <div class="text-sm mt-1">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</div>
                        </div>
                        <div class="stats-card">
                            <div class="text-3xl font-bold" id="analytics-active">0</div>
                            <div class="text-sm mt-1">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">üìä ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</h3>
                            <div class="chart-container">
                                <canvas id="weekly-trend-chart"></canvas>
                            </div>
                        </div>
                        <div class="bg-gray-50 rounded-xl p-6">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">üéØ ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>
                            <div class="chart-container">
                                <canvas id="score-distribution-chart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-8">
                        <button onclick="loadAnalytics()" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                            üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced medications data (same as before)
        const medications = [
            {
                id: 1,
                category: 'vasopressor',
                categoryName: 'üü• Vasopressor / Sympathomimetic',
                name: 'Epinephrine (Adrenaline)',
                mechanism: '‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô Œ± & Œ≤ adrenergic',
                indication: 'CPR, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏´‡∏±‡∏ß‡πÉ‡∏à/‡∏™‡∏°‡∏≠‡∏á',
                dosage: '1 mg IV/IO ‡∏ó‡∏∏‡∏Å 3‚Äì5 ‡∏ô‡∏≤‡∏ó‡∏µ (1:10,000 = 1 mg/10 mL)',
                caution: 'Arrhythmias, Pulmonary edema, Pupils ‡∏Ç‡∏¢‡∏≤‡∏¢',
                color: 'bg-red-500',
                difficulty: 'easy',
                studyTime: 0
            },
            {
                id: 2,
                category: 'antiarrhythmic',
                categoryName: 'üü¶ Antiarrhythmic',
                name: 'Amiodarone',
                mechanism: '‡∏¢‡∏±‡∏ö‡∏¢‡∏±‡πâ‡∏á‡∏ä‡πà‡∏≠‡∏á Na+/K+/Ca2+',
                indication: 'Antiarrhythmic (AF, VT, VF)',
                dosage: '300 mg IV/IO bolus ‚Üí 150 mg ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (‡∏ú‡∏™‡∏° 20‚Äì30 mL D5W)',
                caution: 'QTc prolong, Bradycardia, Hypotension, ‡∏ï‡∏±‡∏ö',
                color: 'bg-blue-500',
                difficulty: 'normal',
                studyTime: 0
            },
            {
                id: 3,
                category: 'antiarrhythmic',
                categoryName: 'üü¶ Antiarrhythmic',
                name: 'Lidocaine',
                mechanism: 'Class Ib ‚Üí ‡∏•‡∏î excitability ‡∏Ç‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à',
                indication: 'VT/VF resistant',
                dosage: '1‚Äì1.5 mg/kg IV/IO bolus ‚Üí 0.5‚Äì0.75 mg/kg ‡∏ó‡∏∏‡∏Å 5‚Äì10 ‡∏ô‡∏≤‡∏ó‡∏µ (Dilute ‡∏Å‡∏±‡∏ö NSS/D5W)',
                caution: 'Seizure, Bradycardia, CNS toxicity',
                color: 'bg-blue-500',
                difficulty: 'normal',
                studyTime: 0
            },
            {
                id: 4,
                category: 'anticholinergic',
                categoryName: 'üü© Anticholinergic',
                name: 'Atropine',
                mechanism: '‡∏ï‡πâ‡∏≤‡∏ô Muscarinic (Ach)',
                indication: 'Bradycardia',
                dosage: '0.5 mg IV ‡∏ó‡∏∏‡∏Å 3‚Äì5 ‡∏ô‡∏≤‡∏ó‡∏µ, max 3 mg (‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ)',
                caution: '‡∏ó‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å, ‡πÉ‡∏à‡∏™‡∏±‡πà‡∏ô, ‡∏ï‡∏≤‡∏û‡∏£‡πà‡∏≤',
                color: 'bg-green-500',
                difficulty: 'easy',
                studyTime: 0
            },
            {
                id: 5,
                category: 'svt',
                categoryName: 'üü® SVT Therapy',
                name: 'Adenosine',
                mechanism: '‡∏ä‡∏∞‡∏•‡∏≠ SA & AV node',
                indication: 'SVT (‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏ï‡πâ‡∏ô‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏´‡πâ‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à)',
                dosage: '6 mg IV rapid push ‚Üí 12 mg ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö, flush 20 mL NSS',
                caution: 'AV block, ‡∏´‡∏≠‡∏ö‡∏´‡∏∑‡∏î, Hypersensitivity',
                color: 'bg-yellow-500',
                difficulty: 'normal',
                studyTime: 0
            },
            {
                id: 6,
                category: 'electrolyte',
                categoryName: 'üü™ Electrolyte / Metabolic',
                name: 'Magnesium sulfate 50%',
                mechanism: '‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏î‡∏∏‡∏• Mg ‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à',
                indication: 'Torsades de pointes, Hypomagnesemia',
                dosage: '1‚Äì2 g IV dilute 10 mL D5W over 5‚Äì20 min',
                caution: '‡∏Å‡∏î‡∏´‡∏≤‡∏¢‡πÉ‡∏à, ‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏£‡∏á, ‡∏á‡πà‡∏ß‡∏á‡∏ã‡∏∂‡∏°',
                color: 'bg-purple-500',
                difficulty: 'hard',
                studyTime: 0
            },
            {
                id: 7,
                category: 'electrolyte',
                categoryName: 'üü™ Electrolyte / Metabolic',
                name: 'Sodium bicarbonate 7.5%',
                mechanism: '‡∏õ‡∏£‡∏±‡∏ö pH ‡πÄ‡∏•‡∏∑‡∏≠‡∏î',
                indication: 'Hyperkalemia, TCA overdose',
                dosage: '1 mEq/kg IV bolus, dilute 50 mL D5W/NSS',
                caution: 'Extravasation ‚Üí tissue necrosis',
                color: 'bg-purple-500',
                difficulty: 'hard',
                studyTime: 0
            },
            {
                id: 8,
                category: 'electrolyte',
                categoryName: 'üü™ Electrolyte / Metabolic',
                name: 'Calcium gluconate',
                mechanism: '‡πÄ‡∏û‡∏¥‡πà‡∏° Ca ‡πÉ‡∏ô‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à',
                indication: 'Hyperkalemia, Hypocalcemia, Ca blocker OD',
                dosage: 'Calcium gluconate 1-2 ampules IV slow push',
                caution: '‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏π‡πà Sodium bicarbonate',
                color: 'bg-purple-500',
                difficulty: 'normal',
                studyTime: 0
            },
            {
                id: 9,
                category: 'metabolic',
                categoryName: 'üü£ Metabolic Support',
                name: 'Glucose 50%',
                mechanism: '‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô & ‡∏™‡∏á‡∏ß‡∏ô‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô',
                indication: 'Hypoglycemia',
                dosage: '25-50 mL IV push (‡∏ï‡∏£‡∏ß‡∏à glucose ‡∏Å‡πà‡∏≠‡∏ô)',
                caution: 'Hyperglycemia, Pulmonary edema, Hypersensitivity',
                color: 'bg-indigo-500',
                difficulty: 'easy',
                studyTime: 0
            },
            {
                id: 10,
                category: 'inotropic',
                categoryName: 'üî¥ Inotropic / Vasopressor',
                name: 'Dobutamine',
                mechanism: 'Œ≤1 agonist ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à',
                indication: 'Heart failure, Cardiogenic shock',
                dosage: '2.5-15 mcg/kg/min IV infusion',
                caution: 'Tachycardia, Arrhythmias, Hypotension',
                color: 'bg-rose-600',
                difficulty: 'normal',
                studyTime: 0
            },
            {
                id: 11,
                category: 'inotropic',
                categoryName: 'üî¥ Inotropic / Vasopressor',
                name: 'Dopamine',
                mechanism: 'Dopamine + Œ±/Œ≤ agonist',
                indication: 'Shock, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à & ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î',
                dosage: '5-20 mcg/kg/min IV infusion',
                caution: 'Tachycardia, Arrhythmias, Extravasation',
                color: 'bg-rose-600',
                difficulty: 'normal',
                studyTime: 0
            },
            {
                id: 12,
                category: 'inotropic',
                categoryName: 'üî¥ Inotropic / Vasopressor',
                name: 'Norepinephrine',
                mechanism: 'Œ±1 > Œ≤1 agonist ‚Üí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î',
                indication: 'Septic shock, Hypotension',
                dosage: '0.1-2 mcg/kg/min IV infusion',
                caution: 'Severe vasoconstriction, Extravasation',
                color: 'bg-rose-600',
                difficulty: 'hard',
                studyTime: 0
            },
            {
                id: 13,
                category: 'thrombolytic',
                categoryName: 'ü©∏ Emergency Thrombolytic',
                name: 'Streptokinase',
                mechanism: '‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏î',
                indication: 'STEMI, Massive PE, Stroke',
                dosage: '1.5 million units IV over 60 min',
                caution: 'Bleeding, Allergic reactions, Hypotension',
                color: 'bg-red-700',
                difficulty: 'hard',
                studyTime: 0
            },
            {
                id: 14,
                category: 'thrombolytic',
                categoryName: 'ü©∏ Emergency Thrombolytic',
                name: 'rtPA',
                mechanism: '‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏î (tissue specific)',
                indication: 'STEMI, Stroke, PE',
                dosage: '0.9 mg/kg (10% bolus 1 minute then 90% infusion 1 hour)',
                caution: 'ICH risk, Bleeding, Time window critical',
                color: 'bg-red-700',
                difficulty: 'hard',
                studyTime: 0
            },
            {
                id: 15,
                category: 'diuretic',
                categoryName: 'üíß Diuretic',
                name: 'Furosemide',
                mechanism: '‡∏Ç‡∏±‡∏ö Na+/‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÑ‡∏ï',
                indication: 'CHF, Edema, Hypertension',
                dosage: '20-80 mg IV/PO (‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏≠‡∏≤‡∏Å‡∏≤‡∏£)',
                caution: 'Ototoxicity, Hypovolemia, Hypokalemia',
                color: 'bg-cyan-600',
                difficulty: 'easy',
                studyTime: 0
            }
        ];

        // Enhanced quiz questions with 25 total questions (15 original + 10 new)
        const quizQuestions = [
            // Original 15 questions
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏≤‡πÅ‡∏£‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ CPR?",
                options: ["Amiodarone", "Epinephrine", "Atropine", "Lidocaine"],
                correct: 1,
                category: "vasopressor",
                difficulty: "easy",
                explanation: "Epinephrine ‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏≤‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô CPR ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏≠‡∏á",
                hint: "‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô Œ± & Œ≤ adrenergic receptor"
            },
            {
                question: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Epinephrine ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô CPR ‡∏Ñ‡∏∑‡∏≠?",
                options: ["0.5 mg ‡∏ó‡∏∏‡∏Å 3-5 ‡∏ô‡∏≤‡∏ó‡∏µ", "1 mg ‡∏ó‡∏∏‡∏Å 3-5 ‡∏ô‡∏≤‡∏ó‡∏µ", "2 mg ‡∏ó‡∏∏‡∏Å 3-5 ‡∏ô‡∏≤‡∏ó‡∏µ", "0.1 mg ‡∏ó‡∏∏‡∏Å 3-5 ‡∏ô‡∏≤‡∏ó‡∏µ"],
                correct: 1,
                category: "vasopressor",
                difficulty: "easy",
                explanation: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Epinephrine ‡πÉ‡∏ô CPR ‡∏Ñ‡∏∑‡∏≠ 1 mg IV/IO ‡∏ó‡∏∏‡∏Å 3-5 ‡∏ô‡∏≤‡∏ó‡∏µ",
                hint: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà"
            },
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ SVT (Supraventricular Tachycardia)?",
                options: ["Adenosine", "Amiodarone", "Lidocaine", "Atropine"],
                correct: 0,
                category: "svt",
                difficulty: "normal",
                explanation: "Adenosine ‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ SVT ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡∏∞‡∏•‡∏≠ SA ‡πÅ‡∏•‡∏∞ AV node",
                hint: "‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà AV node"
            },
            {
                question: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Adenosine ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ SVT ‡∏Ñ‡∏∑‡∏≠?",
                options: ["3 mg ‚Üí 6 mg", "6 mg ‚Üí 12 mg", "12 mg ‚Üí 18 mg", "1 mg ‚Üí 2 mg"],
                correct: 1,
                category: "svt",
                difficulty: "normal",
                explanation: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Adenosine ‡∏Ñ‡∏∑‡∏≠ 6 mg IV rapid push ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢ 12 mg ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á",
                hint: "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏õ‡πá‡∏ô 2 ‡πÄ‡∏ó‡πà‡∏≤"
            },
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Torsades de pointes?",
                options: ["Calcium gluconate", "Magnesium sulfate", "Sodium bicarbonate", "Atropine"],
                correct: 1,
                category: "electrolyte",
                difficulty: "hard",
                explanation: "Magnesium sulfate ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Torsades de pointes ‡πÅ‡∏•‡∏∞ Hypomagnesemia",
                hint: "‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÅ‡∏£‡πà‡∏ò‡∏≤‡∏ï‡∏∏‡πÉ‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à"
            },
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Bradycardia?",
                options: ["Epinephrine", "Atropine", "Amiodarone", "Adenosine"],
                correct: 1,
                category: "anticholinergic",
                difficulty: "easy",
                explanation: "Atropine ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Symptomatic bradycardia ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏ï‡πâ‡∏≤‡∏ô Muscarinic receptor",
                hint: "‡∏¢‡∏≤‡∏ï‡πâ‡∏≤‡∏ô parasympathetic"
            },
            {
                question: "‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡§∞‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á Amiodarone ‡∏Ñ‡∏∑‡∏≠?",
                options: ["Hyperkalemia", "QTc prolongation", "Hypoglycemia", "Respiratory depression"],
                correct: 1,
                category: "antiarrhythmic",
                difficulty: "normal",
                explanation: "Amiodarone ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î QTc prolongation, Bradycardia ‡πÅ‡∏•‡∏∞ Hypotension",
                hint: "‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à"
            },
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Sodium bicarbonate?",
                options: ["Epinephrine", "Calcium gluconate", "Magnesium sulfate", "Atropine"],
                correct: 1,
                category: "electrolyte",
                difficulty: "hard",
                explanation: "‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏´‡πâ Calcium gluconate ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö Sodium bicarbonate ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡∏ï‡∏∞‡∏Å‡∏≠‡∏ô",
                hint: "‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏ï‡∏∞‡∏Å‡∏≠‡∏ô"
            },
            {
                question: "‡∏Å‡∏•‡πÑ‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Furosemide ‡∏Ñ‡∏∑‡∏≠?",
                options: ["‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô Œ≤ receptor", "‡∏¢‡∏±‡∏ö‡∏¢‡∏±‡πâ‡∏á‡∏ä‡πà‡∏≠‡∏á Na+", "‡∏Ç‡∏±‡∏ö Na+/‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÑ‡∏ï", "‡∏ï‡πâ‡∏≤‡∏ô Muscarinic"],
                correct: 2,
                category: "diuretic",
                difficulty: "easy",
                explanation: "Furosemide ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏±‡∏ö Na+ ‡πÅ‡∏•‡∏∞‡∏ô‡πâ‡∏≥‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÑ‡∏ï ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ CHF ‡πÅ‡∏•‡∏∞ Edema",
                hint: "‡∏¢‡∏≤‡∏Ç‡∏±‡∏ö‡∏õ‡∏±‡∏™‡∏™‡∏≤‡∏ß‡∏∞"
            },
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô?",
                options: ["Heparin", "Warfarin", "Streptokinase", "Aspirin"],
                correct: 2,
                category: "thrombolytic",
                difficulty: "hard",
                explanation: "Streptokinase ‡πÅ‡∏•‡∏∞ rtPA ‡πÄ‡∏õ‡πá‡∏ô‡∏¢‡∏≤‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô ‡πÄ‡∏ä‡πà‡∏ô STEMI, PE, Stroke",
                hint: "‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏•‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á"
            },
            {
                question: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Atropine ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏Ñ‡∏∑‡∏≠?",
                options: ["1 mg", "2 mg", "3 mg", "5 mg"],
                correct: 2,
                category: "anticholinergic",
                difficulty: "normal",
                explanation: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Atropine ‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡∏Ñ‡∏∑‡∏≠ 3 mg ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á",
                hint: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏™‡∏∞‡∏™‡∏°‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÉ‡∏ô bradycardia"
            },
            {
                question: "‡∏¢‡∏≤ Norepinephrine ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠ receptor ‡πÉ‡∏î‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î?",
                options: ["Œ≤1", "Œ≤2", "Œ±1", "Dopamine"],
                correct: 2,
                category: "inotropic",
                difficulty: "hard",
                explanation: "Norepinephrine ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠ Œ±1 receptor ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ Œ≤1 ‡∏à‡∏∂‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à",
                hint: "‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏≠‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏´‡∏î‡∏ï‡∏±‡∏ß"
            },
            {
                question: "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ Calcium gluconate ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
                options: ["IV push ‡πÄ‡∏£‡πá‡∏ß", "IV slow push", "IM injection", "Sublingual"],
                correct: 1,
                category: "electrolyte",
                difficulty: "normal",
                explanation: "Calcium gluconate ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏´‡πâ IV slow push ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô cardiac arrest",
                hint: "‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏´‡∏±‡∏ß‡πÉ‡∏à"
            },
            {
                question: "‡∏¢‡∏≤ rtPA ‡∏°‡∏µ time window ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö stroke ‡∏Ñ‡∏∑‡∏≠?",
                options: ["3 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á", "4.5 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á", "6 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á", "12 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á"],
                correct: 1,
                category: "thrombolytic",
                difficulty: "hard",
                explanation: "rtPA ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö stroke ‡∏°‡∏µ time window 4.5 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£",
                hint: "‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö stroke"
            },
            {
                question: "‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á Furosemide ‡∏Ñ‡∏∑‡∏≠?",
                options: ["Hyponatremia", "Hypokalemia", "Ototoxicity", "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô"],
                correct: 3,
                category: "diuretic",
                difficulty: "normal",
                explanation: "Furosemide ‡∏°‡∏µ‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á electrolyte imbalance ‡πÅ‡∏•‡∏∞ ototoxicity",
                hint: "‡∏¢‡∏≤‡∏Ç‡∏±‡∏ö‡∏õ‡∏±‡∏™‡∏™‡∏≤‡∏ß‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á"
            },
            // 10 New Questions for Version 4
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Hyperkalemia ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô?",
                options: ["Sodium bicarbonate", "Calcium gluconate", "Magnesium sulfate", "Atropine"],
                correct: 1,
                category: "electrolyte",
                difficulty: "normal",
                explanation: "Calcium gluconate ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Hyperkalemia ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡∏Ç‡∏≠‡∏á Potassium ‡∏™‡∏π‡∏á",
                hint: "‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏à‡∏≤‡∏Å K+ ‡∏™‡∏π‡∏á"
            },
            {
                question: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤ Magnesium sulfate ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Torsades de pointes ‡∏Ñ‡∏∑‡∏≠?",
                options: ["0.5-1 g IV", "1-2 g IV", "3-4 g IV", "5-6 g IV"],
                correct: 1,
                category: "electrolyte",
                difficulty: "hard",
                explanation: "Magnesium sulfate 1-2 g IV dilute ‡πÉ‡∏ô 10 mL D5W ‡πÉ‡∏´‡πâ‡∏ä‡πâ‡∏≤‡πÜ ‡πÉ‡∏ô 5-20 ‡∏ô‡∏≤‡∏ó‡∏µ",
                hint: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö arrhythmia"
            },
            {
                question: "‡∏¢‡∏≤ Dobutamine ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠ receptor ‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å?",
                options: ["Œ±1 receptor", "Œ≤1 receptor", "Œ≤2 receptor", "Dopamine receptor"],
                correct: 1,
                category: "inotropic",
                difficulty: "normal",
                explanation: "Dobutamine ‡πÄ‡∏õ‡πá‡∏ô Œ≤1 agonist ‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡∏°‡∏≤‡∏Å",
                hint: "‡∏¢‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à"
            },
            {
                question: "‡∏Ç‡πâ‡∏≠‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á Adenosine ‡∏Ñ‡∏∑‡∏≠?",
                options: ["Hypertension", "Asthma/COPD", "Diabetes", "Kidney disease"],
                correct: 1,
                category: "svt",
                difficulty: "normal",
                explanation: "Adenosine ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ Asthma/COPD ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏≠‡∏î‡∏•‡∏°‡∏´‡∏î‡∏ï‡∏±‡∏ß",
                hint: "‡πÇ‡∏£‡∏Ñ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à"
            },
            {
                question: "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ Sodium bicarbonate ‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏î?",
                options: ["Hypernatremia", "Extravasation", "Metabolic alkalosis", "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô"],
                correct: 3,
                category: "electrolyte",
                difficulty: "hard",
                explanation: "Sodium bicarbonate ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á tissue necrosis ‡∏à‡∏≤‡∏Å extravasation",
                hint: "‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏î‡πâ‡∏≤‡∏ô"
            },
            {
                question: "‡∏¢‡∏≤ Dopamine ‡πÉ‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î 5-10 mcg/kg/min ‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?",
                options: ["‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÑ‡∏´‡∏•‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÑ‡∏ï", "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à", "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î", "‡∏•‡∏î‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡πâ‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à"],
                correct: 1,
                category: "inotropic",
                difficulty: "normal",
                explanation: "Dopamine ‡∏Ç‡∏ô‡∏≤‡∏î 5-10 mcg/kg/min ‡∏°‡∏µ‡∏ú‡∏•‡∏ï‡πà‡∏≠ Œ≤1 receptor ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏á‡∏ö‡∏µ‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à",
                hint: "‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á Dopamine"
            },
            {
                question: "‡∏¢‡∏≤‡πÉ‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ Tricyclic antidepressant (TCA) overdose?",
                options: ["Calcium gluconate", "Sodium bicarbonate", "Magnesium sulfate", "Atropine"],
                correct: 1,
                category: "electrolyte",
                difficulty: "hard",
                explanation: "Sodium bicarbonate ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ TCA overdose ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö pH ‡πÄ‡∏•‡∏∑‡∏≠‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏î‡πà‡∏≤‡∏á",
                hint: "‡∏¢‡∏≤‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö pH ‡πÄ‡∏•‡∏∑‡∏≠‡∏î"
            },
            {
                question: "‡∏ú‡∏•‡∏Ç‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á Epinephrine ‡∏Ñ‡∏∑‡∏≠?",
                options: ["Bradycardia", "Hypotension", "Arrhythmias", "Respiratory depression"],
                correct: 2,
                category: "vasopressor",
                difficulty: "easy",
                explanation: "Epinephrine ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î arrhythmias, hypertension ‡πÅ‡∏•‡∏∞ pulmonary edema",
                hint: "‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡πâ‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à"
            },
            {
                question: "‡∏¢‡∏≤ Norepinephrine ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å?",
                options: ["Bradycardia", "Heart failure", "Septic shock", "SVT"],
                correct: 2,
                category: "inotropic",
                difficulty: "normal",
                explanation: "Norepinephrine ‡πÉ‡∏ä‡πâ‡∏£‡∏±‡∏Å‡∏©‡∏≤ septic shock ‡πÅ‡∏•‡∏∞ hypotension ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡∏ï‡πà‡∏≠ fluid",
                hint: "‡∏†‡∏≤‡∏ß‡∏∞‡∏ä‡πá‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡πÄ‡∏ä‡∏∑‡πâ‡∏≠"
            },
            {
                question: "‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏¢‡∏≤ Amiodarone ‡∏Ñ‡∏ß‡∏£‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£?",
                options: ["Normal saline", "D5W", "Lactated Ringer", "Sterile water"],
                correct: 1,
                category: "antiarrhythmic",
                difficulty: "normal",
                explanation: "Amiodarone ‡∏Ñ‡∏ß‡∏£‡∏ú‡∏™‡∏°‡∏Å‡∏±‡∏ö D5W (Dextrose 5% in water) 20-30 mL",
                hint: "‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•"
            }
        ];

        // Global variables (enhanced)
        let studiedCards = new Set();
        let totalFlips = 0;
        let currentFilter = 'all';
        let currentMode = 'flashcards';
        let studyStartTime = null;
        let studyTimer = null;
        let studyDuration = 0;
        let quizState = {
            currentQuestion: 0,
            score: 0,
            answers: [],
            startTime: null,
            timer: null
        };
        let quizResults = JSON.parse(localStorage.getItem('quizResults')) || [];
        let currentUser = null;
        let performanceChart = null;
        let weeklyTrendChart = null;
        let scoreDistributionChart = null;

        // Enhanced Google Apps Script Functions
        function initializeApp() {
            showNotification('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheets v4...', 'info');
            
            google.script.run
                .withSuccessHandler(onUserInfoSuccess)
                .withFailureHandler(onUserInfoFailure)
                .getUserInfo();
        }

        function onUserInfoSuccess(userInfo) {
            currentUser = userInfo;
            document.getElementById('user-email').textContent = userInfo.email;
            document.getElementById('connection-status').className = 'w-3 h-3 bg-green-500 rounded-full mr-2';
            document.getElementById('connection-text').textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à v4';
            showNotification('‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheets v4 ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
        }

        function onUserInfoFailure(error) {
            document.getElementById('user-email').textContent = '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ';
            document.getElementById('connection-status').className = 'w-3 h-3 bg-red-500 rounded-full mr-2';
            document.getElementById('connection-text').textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß';
            showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheets ‡πÑ‡∏î‡πâ', 'error');
            console.error('Connection error:', error);
        }

        // Enhanced notification system
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.innerHTML = `
                <div class="flex items-center">
                    ${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
                    <span class="ml-2">${message}</span>
                </div>
            `;
            notification.className = `notification ${type}`;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Enhanced study timer
        function startStudyTimer() {
            const btn = document.getElementById('timer-btn');
            
            if (studyTimer) {
                // Stop timer
                clearInterval(studyTimer);
                studyTimer = null;
                studyDuration += Math.floor((new Date() - studyStartTime) / 1000);
                btn.innerHTML = '‚è±Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤';
                btn.className = btn.className.replace('from-red-600 to-red-700', 'from-yellow-600 to-orange-600');
                updateStudyTimeDisplay();
            } else {
                // Start timer
                studyStartTime = new Date();
                studyTimer = setInterval(updateStudyTimeDisplay, 1000);
                btn.innerHTML = '‚èπÔ∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤';
                btn.className = btn.className.replace('from-yellow-600 to-orange-600', 'from-red-600 to-red-700');
            }
        }

        function updateStudyTimeDisplay() {
            let totalSeconds = studyDuration;
            if (studyTimer && studyStartTime) {
                totalSeconds += Math.floor((new Date() - studyStartTime) / 1000);
            }
            
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            document.getElementById('study-time-display').textContent = 
                `‡πÄ‡∏ß‡∏•‡∏≤‡∏®‡∏∂‡∏Å‡∏©‡∏≤: ${minutes} ‡∏ô‡∏≤‡∏ó‡∏µ ${seconds} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
        }

        // Enhanced quiz system with 25 questions
        function startQuiz() {
            document.getElementById('start-quiz-btn').style.display = 'none';
            document.getElementById('quiz-container').classList.remove('hidden');
            
            quizState = {
                currentQuestion: 0,
                score: 0,
                answers: [],
                startTime: new Date(),
                timer: null
            };
            
            // Shuffle questions and take all 45
            const shuffledQuestions = [...quizQuestions].sort(() => Math.random() - 0.5);
            quizState.questions = shuffledQuestions;
            
            startTimer();
            showQuestion();
        }

        function showQuestion() {
            const question = quizState.questions[quizState.currentQuestion];
            
            document.getElementById('current-question').textContent = quizState.currentQuestion + 1;
            document.getElementById('current-score').textContent = quizState.score;
            
            const progress = ((quizState.currentQuestion + 1) / 25) * 100;
            document.getElementById('quiz-progress').style.width = `${progress}%`;
            
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('question-category').textContent = `‡∏´‡∏°‡∏ß‡∏î: ${question.category}`;
            document.getElementById('question-hint').textContent = `üí° ${question.hint || ''}`;
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = question.options.map((option, index) => `
                <button class="quiz-option bg-white hover:bg-gray-50 border-2 border-gray-200 rounded-xl p-6 text-left transition-all transform hover:scale-105 shadow-md" 
                        onclick="selectAnswer(${index})">
                    <div class="font-medium text-gray-800">${String.fromCharCode(65 + index)}. ${option}</div>
                </button>
            `).join('');
            
            document.getElementById('next-btn').disabled = true;
        }

        function selectAnswer(selectedIndex) {
            const question = quizState.questions[quizState.currentQuestion];
            const options = document.querySelectorAll('.quiz-option');
            
            options.forEach((option, index) => {
                option.classList.add('disabled');
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            const isCorrect = selectedIndex === question.correct;
            if (isCorrect) {
                quizState.score++;
            }
            
            quizState.answers.push({
                question: question.question,
                selected: selectedIndex,
                correct: question.correct,
                isCorrect: isCorrect,
                explanation: question.explanation
            });
            
            document.getElementById('current-score').textContent = quizState.score;
            document.getElementById('next-btn').disabled = false;
            
            // Show explanation after a delay
            setTimeout(() => {
                if (question.explanation) {
                    showNotification(question.explanation, isCorrect ? 'success' : 'info');
                }
            }, 1000);
        }

        function nextQuestion() {
            quizState.currentQuestion++;
            
            if (quizState.currentQuestion >= 25) {
                finishQuiz();
            } else {
                showQuestion();
            }
        }

        function finishQuiz() {
            clearInterval(quizState.timer);
            
            const endTime = new Date();
            const duration = Math.floor((endTime - quizState.startTime) / 1000);
            const percentage = Math.round((quizState.score / 25) * 100);
            
            const result = {
                date: endTime.toLocaleDateString('th-TH'),
                time: endTime.toLocaleTimeString('th-TH'),
                score: quizState.score,
                total: 25,
                percentage: percentage,
                duration: duration,
                answers: quizState.answers
            };
            
            // Save to localStorage
            quizResults.push(result);
            localStorage.setItem('quizResults', JSON.stringify(quizResults));
            
            // Save to Google Sheets
            if (currentUser) {
                google.script.run
                    .withSuccessHandler(onSaveQuizSuccess)
                    .withFailureHandler(onSaveQuizFailure)
                    .saveQuizResult({
                        ...result,
                        userEmail: currentUser.email,
                        userName: currentUser.name || currentUser.email.split('@')[0]
                    });
            }
            
            showQuizResult(result);
        }

        function onSaveQuizSuccess(result) {
            showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
        }

        function onSaveQuizFailure(error) {
            showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ', 'error');
            console.error('Save quiz error:', error);
        }

        function showQuizResult(result) {
            const grade = calculateGrade(result.percentage);
            const gradeColor = getGradeColor(grade);
            
            document.getElementById('quiz-container').innerHTML = `
                <div class="text-center">
                    <div class="text-6xl mb-6">${result.percentage >= 80 ? 'üéâ' : result.percentage >= 60 ? 'üëç' : 'üí™'}</div>
                    <h2 class="text-4xl font-bold text-gray-800 mb-4">‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
                    <div class="text-6xl font-bold ${gradeColor} mb-4">${result.score}/25</div>
                    <div class="text-3xl font-bold text-gray-700 mb-2">${result.percentage}%</div>
                    <div class="text-2xl font-bold ${gradeColor} mb-6">‡πÄ‡∏Å‡∏£‡∏î ${grade}</div>
                    <div class="text-lg text-gray-600 mb-8">
                        ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: ${Math.floor(result.duration / 60)} ‡∏ô‡∏≤‡∏ó‡∏µ ${result.duration % 60} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                    </div>
                    <div class="space-x-4">
                        <button onclick="resetQuiz()" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                            üîÑ ‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà
                        </button>
                        <button onclick="switchMode('results')" class="bg-gradient-to-r from-green-600 to-blue-600 hover:from-green-700 hover:to-blue-700 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg">
                            üìä ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                        </button>
                    </div>
                </div>
            `;
        }

        function calculateGrade(percentage) {
            if (percentage >= 90) return 'A+';
            if (percentage >= 85) return 'A';
            if (percentage >= 80) return 'A-';
            if (percentage >= 75) return 'B+';
            if (percentage >= 70) return 'B';
            if (percentage >= 65) return 'B-';
            if (percentage >= 60) return 'C+';
            if (percentage >= 55) return 'C';
            if (percentage >= 50) return 'C-';
            return 'F';
        }

        function getGradeColor(grade) {
            if (grade.startsWith('A')) return 'text-green-600';
            if (grade.startsWith('B')) return 'text-blue-600';
            if (grade.startsWith('C')) return 'text-yellow-600';
            return 'text-red-600';
        }

        function resetQuiz() {
            document.getElementById('start-quiz-btn').style.display = 'inline-block';
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('quiz-container').innerHTML = `
                <div class="text-center mb-8">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4" id="question-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°...</h3>
                    <div class="text-gray-600" id="question-category"></div>
                    <div class="text-sm text-gray-500 mt-2" id="question-hint"></div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="quiz-options">
                    <!-- Options will be generated by JavaScript -->
                </div>
                
                <div class="text-center mt-8">
                    <button onclick="nextQuestion()" class="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-3 rounded-xl font-medium transition-all transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" id="next-btn" disabled>
                        ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí
                    </button>
                </div>
            `;
            
            quizState = {
                currentQuestion: 0,
                score: 0,
                answers: [],
                startTime: null,
                timer: null
            };
            
            document.getElementById('current-question').textContent = '1';
            document.getElementById('current-score').textContent = '0';
            document.getElementById('quiz-timer').textContent = '00:00';
            document.getElementById('quiz-progress').style.width = '2.2%';
        }

        function startTimer() {
            let seconds = 0;
            quizState.timer = setInterval(() => {
                seconds++;
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = seconds % 60;
                document.getElementById('quiz-timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        // Mode switching
        function switchMode(mode) {
            // Hide all modes
            document.querySelectorAll('.mode-content').forEach(el => el.classList.add('hidden'));
            
            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.classList.add('text-gray-600');
            });
            
            // Show selected mode
            document.getElementById(`${mode}-mode`).classList.remove('hidden');
            
            // Add active class to selected tab
            const activeTab = document.getElementById(`${mode}-tab`);
            activeTab.classList.add('active');
            activeTab.classList.remove('text-gray-600');
            
            currentMode = mode;
            
            // Load data for specific modes
            if (mode === 'results') {
                loadMyResults();
            } else if (mode === 'leaderboard') {
                loadLeaderboard();
            } else if (mode === 'analytics') {
                loadAnalytics();
            }
        }

        // Flash cards functions
        function generateCards() {
            const container = document.getElementById('cards-container');
            const filteredMeds = currentFilter === 'all' ? medications : medications.filter(med => med.category === currentFilter);
            
            container.innerHTML = filteredMeds.map(med => `
                <div class="card-flip" id="card-${med.id}" onclick="flipCard(${med.id})">
                    <div class="card-inner">
                        <div class="card-front ${med.color} text-white shadow-xl">
                            <div class="text-center h-full flex flex-col justify-center">
                                <div class="text-xs font-medium mb-2 opacity-90 line-clamp-2">${med.categoryName}</div>
                                <h3 class="text-lg font-bold mb-3 line-clamp-2">${med.name}</h3>
                                <div class="text-xs opacity-75">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</div>
                            </div>
                        </div>
                        <div class="card-back bg-white shadow-xl border-2 border-gray-200">
                            <div class="text-left space-y-2 text-xs h-full overflow-y-auto">
                                <div class="mb-2"><strong class="text-blue-600">‡∏Å‡∏•‡πÑ‡∏Å:</strong><br><span class="text-gray-700">${med.mechanism}</span></div>
                                <div class="mb-2"><strong class="text-green-600">‡∏Ç‡πâ‡∏≠‡∏ö‡πà‡∏á‡πÉ‡∏ä‡πâ:</strong><br><span class="text-gray-700">${med.indication}</span></div>
                                <div class="mb-2"><strong class="text-purple-600">‡∏Ç‡∏ô‡∏≤‡∏î‡∏¢‡∏≤:</strong><br><span class="text-gray-700">${med.dosage}</span></div>
                                <div><strong class="text-red-600">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á:</strong><br><span class="text-gray-700">${med.caution}</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            updateProgress();
        }

        function flipCard(cardId) {
            const card = document.getElementById(`card-${cardId}`);
            card.classList.toggle('flipped');
            
            if (card.classList.contains('flipped')) {
                studiedCards.add(cardId);
                totalFlips++;
                updateProgress();
                updateStats();
            }
        }

        function updateProgress() {
            const totalCards = currentFilter === 'all' ? medications.length : medications.filter(med => med.category === currentFilter).length;
            const studiedCount = studiedCards.size;
            const percentage = Math.round((studiedCount / totalCards) * 100);
            
            document.getElementById('progress-text').textContent = `${studiedCount}/${totalCards}`;
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            
            // Update detailed stats
            document.getElementById('studied-count').textContent = studiedCount;
            document.getElementById('remaining-count').textContent = totalCards - studiedCount;
            document.getElementById('completion-rate').textContent = `${percentage}%`;
        }

        function updateStats() {
            document.getElementById('total-flips').textContent = totalFlips;
            
            // Update focus category
            const categoryCount = {};
            studiedCards.forEach(cardId => {
                const med = medications.find(m => m.id === cardId);
                if (med) {
                    categoryCount[med.category] = (categoryCount[med.category] || 0) + 1;
                }
            });
            
            const focusCategory = Object.keys(categoryCount).reduce((a, b) => 
                categoryCount[a] > categoryCount[b] ? a : b, 'Mixed');
            document.getElementById('focus-category').textContent = focusCategory;
        }

        function filterCards(category) {
            currentFilter = category;
            
            // Update filter button styles
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('ring-2', 'ring-white', 'ring-opacity-60');
            });
            event.target.classList.add('ring-2', 'ring-white', 'ring-opacity-60');
            
            generateCards();
        }

        function shuffleCards() {
            medications.sort(() => Math.random() - 0.5);
            generateCards();
            showNotification('‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ñ‡∏π‡∏Å‡∏™‡∏•‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß!', 'success');
        }

        function resetProgress() {
            studiedCards.clear();
            totalFlips = 0;
            studyDuration = 0;
            if (studyTimer) {
                clearInterval(studyTimer);
                studyTimer = null;
                document.getElementById('timer-btn').innerHTML = '‚è±Ô∏è ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤';
                document.getElementById('timer-btn').className = document.getElementById('timer-btn').className.replace('from-red-600 to-red-700', 'from-yellow-600 to-orange-600');
            }
            
            // Reset all cards
            document.querySelectorAll('.card-flip').forEach(card => {
                card.classList.remove('flipped');
            });
            
            updateProgress();
            updateStats();
            updateStudyTimeDisplay();
            showNotification('‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß!', 'info');
        }

        function showAll() {
            document.querySelectorAll('.card-flip').forEach(card => {
                card.classList.add('flipped');
                const cardId = parseInt(card.id.split('-')[1]);
                studiedCards.add(cardId);
            });
            
            totalFlips += medications.length;
            updateProgress();
            updateStats();
            showNotification('‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!', 'success');
        }

        function saveStudyProgress() {
            if (!currentUser) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheets ‡∏Å‡πà‡∏≠‡∏ô', 'error');
                return;
            }
            
            const progressData = {
                userEmail: currentUser.email,
                userName: currentUser.name || currentUser.email.split('@')[0],
                studiedCards: Array.from(studiedCards),
                totalFlips: totalFlips,
                completionRate: Math.round((studiedCards.size / medications.length) * 100),
                studyDuration: studyDuration + (studyTimer && studyStartTime ? Math.floor((new Date() - studyStartTime) / 1000) : 0),
                categoryFocus: document.getElementById('focus-category').textContent
            };
            
            google.script.run
                .withSuccessHandler(onSaveProgressSuccess)
                .withFailureHandler(onSaveProgressFailure)
                .saveStudyProgress(progressData);
        }

        function onSaveProgressSuccess(result) {
            showNotification('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!', 'success');
        }

        function onSaveProgressFailure(error) {
            showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏î‡πâ', 'error');
            console.error('Save progress error:', error);
        }

        // Results functions
        function loadMyResults() {
            if (!currentUser) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheets ‡∏Å‡πà‡∏≠‡∏ô', 'error');
                return;
            }
            
            google.script.run
                .withSuccessHandler(displayMyResults)
                .withFailureHandler(onLoadResultsFailure)
                .getUserQuizResults(currentUser.email);
        }

        function displayMyResults(results) {
            const tableBody = document.getElementById('results-table');
            
            if (!results || results.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-4 py-8 text-center text-gray-500">
                            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö<br>
                            <span class="text-sm">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</span>
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Calculate summary stats
            const totalAttempts = results.length;
            const scores = results.map(r => r.Percentage || 0);
            const averageScore = Math.round(scores.reduce((a, b) => a + b, 0) / totalAttempts);
            const bestScore = Math.max(...scores);
            const improvementRate = totalAttempts > 1 ? 
                Math.round(((scores[0] - scores[scores.length - 1]) / scores[scores.length - 1]) * 100) : 0;
            
            document.getElementById('total-attempts').textContent = totalAttempts;
            document.getElementById('average-score').textContent = `${averageScore}%`;
            document.getElementById('best-score').textContent = `${bestScore}%`;
            document.getElementById('improvement-rate').textContent = `${improvementRate > 0 ? '+' : ''}${improvementRate}%`;
            
            // Display results table
            tableBody.innerHTML = results.map((result, index) => `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 text-sm text-gray-900">${index + 1}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${result.Date || 'N/A'}</td>
                    <td class="px-4 py-3 text-sm font-medium">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getScoreColor(result.Percentage || 0)}">
                            ${result.Score || 0}/${result['Total Questions'] || 25} (${result.Percentage || 0}%)
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-900">
                        ${Math.floor((result['Duration (seconds)'] || 0) / 60)}:${((result['Duration (seconds)'] || 0) % 60).toString().padStart(2, '0')}
                    </td>
                    <td class="px-4 py-3 text-sm font-medium">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getGradeColorClass(result.Grade || 'F')}">
                            ${result.Grade || 'F'}
                        </span>
                    </td>
                </tr>
            `).join('');
            
            // Create performance chart
            createPerformanceChart(results);
        }

        function getScoreColor(percentage) {
            if (percentage >= 80) return 'bg-green-100 text-green-800';
            if (percentage >= 60) return 'bg-yellow-100 text-yellow-800';
            return 'bg-red-100 text-red-800';
        }

        function getGradeColorClass(grade) {
            if (grade.startsWith('A')) return 'bg-green-100 text-green-800';
            if (grade.startsWith('B')) return 'bg-blue-100 text-blue-800';
            if (grade.startsWith('C')) return 'bg-yellow-100 text-yellow-800';
            return 'bg-red-100 text-red-800';
        }

        function createPerformanceChart(results) {
            const ctx = document.getElementById('performance-chart');
            if (!ctx) return;
            
            if (performanceChart) {
                performanceChart.destroy();
            }
            
            const labels = results.slice(-10).reverse().map((_, index) => `‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà ${index + 1}`);
            const data = results.slice(-10).reverse().map(r => r.Percentage || 0);
            
            performanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô (%)',
                        data: data,
                        borderColor: 'rgb(59, 130, 246)',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function onLoadResultsFailure(error) {
            showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ', 'error');
            console.error('Load results error:', error);
        }

        function exportMyResults() {
            if (!currentUser) {
                showNotification('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Google Sheets ‡∏Å‡πà‡∏≠‡∏ô', 'error');
                return;
            }
            
            google.script.run
                .withSuccessHandler(onExportSuccess)
                .withFailureHandler(onExportFailure)
                .exportUserData(currentUser.email, 'quiz');
        }

        function onExportSuccess(result) {
            if (result.success) {
                showNotification(`‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${result.fileName}`, 'success');
            } else {
                showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ', 'error');
            }
        }

        function onExportFailure(error) {
            showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ', 'error');
            console.error('Export error:', error);
        }

        // Leaderboard functions
        function loadLeaderboard() {
            google.script.run
                .withSuccessHandler(displayLeaderboard)
                .withFailureHandler(onLoadLeaderboardFailure)
                .getLeaderboard();
        }

        function displayLeaderboard(leaderboard) {
            const tableBody = document.getElementById('leaderboard-table');
            const podium = document.getElementById('podium');
            
            if (!leaderboard || leaderboard.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-4 py-8 text-center text-gray-500">
                            ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö<br>
                            <span class="text-sm">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö</span>
                        </td>
                    </tr>
                `;
                podium.innerHTML = '';
                return;
            }
            
            // Display top 3 podium
            const top3 = leaderboard.slice(0, 3);
            podium.innerHTML = top3.map((entry, index) => {
                const medals = ['ü•á', 'ü•à', 'ü•â'];
                const colors = ['from-yellow-400 to-yellow-600', 'from-gray-400 to-gray-600', 'from-orange-400 to-orange-600'];
                
                return `
                    <div class="text-center p-6 bg-gradient-to-br ${colors[index]} text-white rounded-xl shadow-lg transform hover:scale-105 transition-all">
                        <div class="text-4xl mb-2">${medals[index]}</div>
                        <div class="text-xl font-bold mb-2">${entry.userName}</div>
                        <div class="text-3xl font-bold mb-1">${entry.bestScore}%</div>
                        <div class="text-sm opacity-90">${Math.floor(entry.duration / 60)}:${(entry.duration % 60).toString().padStart(2, '0')}</div>
                        <div class="text-xs opacity-75 mt-1">${entry.totalAttempts} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                    </div>
                `;
            }).join('');
            
            // Display full leaderboard table
            tableBody.innerHTML = leaderboard.map(entry => `
                <tr class="hover:bg-gray-50 ${entry.userEmail === currentUser?.email ? 'bg-blue-50' : ''}">
                    <td class="px-4 py-3 text-sm font-medium text-gray-900">
                        ${entry.rank <= 3 ? ['ü•á', 'ü•à', 'ü•â'][entry.rank - 1] : entry.rank}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-900">
                        ${entry.userName}
                        ${entry.userEmail === currentUser?.email ? '<span class="text-blue-600 text-xs">(‡∏Ñ‡∏∏‡∏ì)</span>' : ''}
                    </td>
                    <td class="px-4 py-3 text-sm font-medium">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getScoreColor(entry.bestScore)}">
                            ${entry.bestScore}%
                        </span>
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-900">
                        ${Math.floor(entry.duration / 60)}:${(entry.duration % 60).toString().padStart(2, '0')}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-900">${entry.totalAttempts}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${entry.averageScore}%</td>
                </tr>
            `).join('');
        }

        function onLoadLeaderboardFailure(error) {
            showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÑ‡∏î‡πâ', 'error');
            console.error('Load leaderboard error:', error);
        }

        // Analytics functions
        function loadAnalytics() {
            google.script.run
                .withSuccessHandler(displayAnalytics)
                .withFailureHandler(onLoadAnalyticsFailure)
                .getAnalyticsDashboard();
        }

        function displayAnalytics(dashboard) {
            if (dashboard.error) {
                showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏î‡πâ', 'error');
                return;
            }
            
            // Update overview stats
            document.getElementById('analytics-users').textContent = dashboard.totalUsers || 0;
            document.getElementById('analytics-quizzes').textContent = dashboard.totalQuizzes || 0;
            document.getElementById('analytics-average').textContent = `${dashboard.averageScore || 0}%`;
            document.getElementById('analytics-active').textContent = dashboard.weeklyTrends?.slice(-1)[0]?.activeUsers || 0;
            
            // Create charts
            if (dashboard.weeklyTrends && dashboard.weeklyTrends.length > 0) {
                createWeeklyTrendChart(dashboard.weeklyTrends);
                createScoreDistributionChart(dashboard);
            }
        }

        function createWeeklyTrendChart(trends) {
            const ctx = document.getElementById('weekly-trend-chart');
            if (!ctx) return;
            
            if (weeklyTrendChart) {
                weeklyTrendChart.destroy();
            }
            
            const labels = trends.map(t => new Date(t.date).toLocaleDateString('th-TH', { month: 'short', day: 'numeric' }));
            
            weeklyTrendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô',
                            data: trends.map(t => t.activeUsers),
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            yAxisID: 'y'
                        },
                        {
                            label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢',
                            data: trends.map(t => t.averageScore),
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ (%)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    }
                }
            });
        }

        function createScoreDistributionChart(dashboard) {
            const ctx = document.getElementById('score-distribution-chart');
            if (!ctx) return;
            
            if (scoreDistributionChart) {
                scoreDistributionChart.destroy();
            }
            
            // Mock score distribution data
            const scoreRanges = ['0-49%', '50-59%', '60-69%', '70-79%', '80-89%', '90-100%'];
            const distribution = [5, 8, 15, 25, 30, 17]; // Mock data
            
            scoreDistributionChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: scoreRanges,
                    datasets: [{
                        data: distribution,
                        backgroundColor: [
                            '#ef4444',
                            '#f97316',
                            '#eab308',
                            '#3b82f6',
                            '#10b981',
                            '#059669'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function onLoadAnalyticsFailure(error) {
            showNotification('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÑ‡∏î‡πâ', 'error');
            console.error('Load analytics error:', error);
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            generateCards();
            initializeApp();
        });
    </script>
    ‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤: ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ô‡∏±‡∏ô‡∏ï‡∏û‡∏£ ‡∏ó‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°
</footer>
</head>
</body>
</html>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98f0f4e8d3dc8963',t:'MTc2MDU0ODUwNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
